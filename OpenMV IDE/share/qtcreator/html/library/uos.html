

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>uos – basic “operating system” services &mdash; MicroPython 1.9.4 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
  

  
    <link rel="top" title="MicroPython 1.9.4 documentation" href="../index.html"/>
        <link rel="up" title="MicroPython libraries" href="index.html"/>
        <link rel="next" title="ure – simple regular expressions" href="ure.html"/>
        <link rel="prev" title="ujson – JSON encoding and decoding" href="ujson.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> MicroPython
          

          
            
            <img src="../_static/web-logo-sticky.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.9.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/quickref.html">Quick reference for the openmvcam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/general.html">General information about the openmvcam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/tutorial/index.html">OpenMV Cam Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">MicroPython libraries</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#python-standard-libraries-and-micro-libraries">Python standard libraries and micro-libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="builtins.html">Builtin functions and exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="array.html"><code class="docutils literal"><span class="pre">array</span></code> &#8211; arrays of numeric data</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmath.html"><code class="docutils literal"><span class="pre">cmath</span></code> &#8211; mathematical functions for complex numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="gc.html"><code class="docutils literal"><span class="pre">gc</span></code> &#8211; control the garbage collector</a></li>
<li class="toctree-l3"><a class="reference internal" href="math.html"><code class="docutils literal"><span class="pre">math</span></code> &#8211; mathematical functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="sys.html"><code class="docutils literal"><span class="pre">sys</span></code> &#8211; system specific functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="ubinascii.html"><code class="docutils literal"><span class="pre">ubinascii</span></code> &#8211; binary/ASCII conversions</a></li>
<li class="toctree-l3"><a class="reference internal" href="ucollections.html"><code class="docutils literal"><span class="pre">ucollections</span></code> &#8211; collection and container types</a></li>
<li class="toctree-l3"><a class="reference internal" href="uerrno.html"><code class="docutils literal"><span class="pre">uerrno</span></code> &#8211; system error codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="uhashlib.html"><code class="docutils literal"><span class="pre">uhashlib</span></code> &#8211; hashing algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="uheapq.html"><code class="docutils literal"><span class="pre">uheapq</span></code> &#8211; heap queue algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="uio.html"><code class="docutils literal"><span class="pre">uio</span></code> &#8211; input/output streams</a></li>
<li class="toctree-l3"><a class="reference internal" href="ujson.html"><code class="docutils literal"><span class="pre">ujson</span></code> &#8211; JSON encoding and decoding</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href=""><code class="docutils literal"><span class="pre">uos</span></code> &#8211; basic &#8220;operating system&#8221; services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#general-functions">General functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filesystem-access">Filesystem access</a></li>
<li class="toctree-l4"><a class="reference internal" href="#terminal-redirection-and-duplication">Terminal redirection and duplication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filesystem-mounting">Filesystem mounting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#block-devices">Block devices</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ure.html"><code class="docutils literal"><span class="pre">ure</span></code> &#8211; simple regular expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="uselect.html"><code class="docutils literal"><span class="pre">uselect</span></code> &#8211; wait for events on a set of streams</a></li>
<li class="toctree-l3"><a class="reference internal" href="usocket.html"><code class="docutils literal"><span class="pre">usocket</span></code> &#8211; socket module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ustruct.html"><code class="docutils literal"><span class="pre">ustruct</span></code> &#8211; pack and unpack primitive data types</a></li>
<li class="toctree-l3"><a class="reference internal" href="utime.html"><code class="docutils literal"><span class="pre">utime</span></code> &#8211; time related functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="uzlib.html"><code class="docutils literal"><span class="pre">uzlib</span></code> &#8211; zlib decompression</a></li>
<li class="toctree-l3"><a class="reference internal" href="_thread.html"><code class="docutils literal"><span class="pre">_thread</span></code> &#8211; multithreading support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#micropython-specific-libraries">MicroPython-specific libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#libraries-specific-to-the-openmv-cam">Libraries specific to the OpenMV Cam</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">The MicroPython language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genrst/index.html">MicroPython differences from CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">MicroPython license information</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">MicroPython</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">MicroPython libraries</a> &raquo;</li>
      
    <li><code class="docutils literal"><span class="pre">uos</span></code> &#8211; basic &#8220;operating system&#8221; services</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/library/uos.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-uos">
<span id="uos-basic-operating-system-services"></span><h1><a class="reference internal" href="#module-uos" title="uos: basic &quot;operating system&quot; services"><code class="xref py py-mod docutils literal"><span class="pre">uos</span></code></a> &#8211; basic &#8220;operating system&#8221; services<a class="headerlink" href="#module-uos" title="Permalink to this headline">¶</a></h1>
<p><em>This module implements a subset of the corresponding</em> <a class="reference internal" href="../reference/glossary.html#term-cpython"><code class="xref any std std-term docutils literal"><span class="pre">CPython</span></code></a> <em>module,
as described below. For more information, refer to the original
CPython documentation:</em> <a class="reference external" href="http://docs.python.org/3.5/library/os.html#module-os" title="(in Python v3.5)"><code class="docutils literal"><span class="pre">os</span></code></a>.</p>
<p>The <code class="docutils literal"><span class="pre">uos</span></code> module contains functions for filesystem access and mounting,
terminal redirection and duplication, and the <code class="docutils literal"><span class="pre">uname</span></code> and <code class="docutils literal"><span class="pre">urandom</span></code>
functions.</p>
<div class="section" id="general-functions">
<h2>General functions<a class="headerlink" href="#general-functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="uos.uname">
<code class="descclassname">uos.</code><code class="descname">uname</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uos.uname" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a tuple (possibly a named tuple) containing information about the
underlying machine and/or its operating system.  The tuple has five fields
in the following order, each of them being a string:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">sysname</span></code> &#8211; the name of the underlying system</li>
<li><code class="docutils literal"><span class="pre">nodename</span></code> &#8211; the network name (can be the same as <code class="docutils literal"><span class="pre">sysname</span></code>)</li>
<li><code class="docutils literal"><span class="pre">release</span></code> &#8211; the version of the underlying system</li>
<li><code class="docutils literal"><span class="pre">version</span></code> &#8211; the MicroPython version and build date</li>
<li><code class="docutils literal"><span class="pre">machine</span></code> &#8211; an identifier for the underlying hardware (eg board, CPU)</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="uos.urandom">
<code class="descclassname">uos.</code><code class="descname">urandom</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.urandom" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a bytes object with <em>n</em> random bytes. Whenever possible, it is
generated by the hardware random number generator.</p>
</dd></dl>

</div>
<div class="section" id="filesystem-access">
<h2>Filesystem access<a class="headerlink" href="#filesystem-access" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="uos.chdir">
<code class="descclassname">uos.</code><code class="descname">chdir</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.chdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Change current directory.</p>
</dd></dl>

<dl class="function">
<dt id="uos.getcwd">
<code class="descclassname">uos.</code><code class="descname">getcwd</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uos.getcwd" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current directory.</p>
</dd></dl>

<dl class="function">
<dt id="uos.ilistdir">
<code class="descclassname">uos.</code><code class="descname">ilistdir</code><span class="sig-paren">(</span><span class="optional">[</span><em>dir</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#uos.ilistdir" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns an iterator which then yields tuples corresponding to
the entries in the directory that it is listing.  With no argument it lists the
current directory, otherwise it lists the directory given by <em>dir</em>.</p>
<p>The tuples have the form <em>(name, type, inode[, size])</em>:</p>
<blockquote>
<div><ul class="simple">
<li><em>name</em> is a string (or bytes if <em>dir</em> is a bytes object) and is the name of
the entry;</li>
<li><em>type</em> is an integer that specifies the type of the entry, with 0x4000 for
directories and 0x8000 for regular files;</li>
<li><em>inode</em> is an integer corresponding to the inode of the file, and may be 0
for filesystems that don&#8217;t have such a notion.</li>
<li>Some platforms may return a 4-tuple that includes the entry&#8217;s <em>size</em>.  For
file entries, <em>size</em> is an integer representing the size of the file
or -1 if unknown.  Its meaning is currently undefined for directory
entries.</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="uos.listdir">
<code class="descclassname">uos.</code><code class="descname">listdir</code><span class="sig-paren">(</span><span class="optional">[</span><em>dir</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#uos.listdir" title="Permalink to this definition">¶</a></dt>
<dd><p>With no argument, list the current directory.  Otherwise list the given directory.</p>
</dd></dl>

<dl class="function">
<dt id="uos.mkdir">
<code class="descclassname">uos.</code><code class="descname">mkdir</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new directory.</p>
</dd></dl>

<dl class="function">
<dt id="uos.remove">
<code class="descclassname">uos.</code><code class="descname">remove</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a file.</p>
</dd></dl>

<dl class="function">
<dt id="uos.rmdir">
<code class="descclassname">uos.</code><code class="descname">rmdir</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.rmdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a directory.</p>
</dd></dl>

<dl class="function">
<dt id="uos.rename">
<code class="descclassname">uos.</code><code class="descname">rename</code><span class="sig-paren">(</span><em>old_path</em>, <em>new_path</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.rename" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename a file.</p>
</dd></dl>

<dl class="function">
<dt id="uos.stat">
<code class="descclassname">uos.</code><code class="descname">stat</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the status of a file or directory.</p>
</dd></dl>

<dl class="function">
<dt id="uos.statvfs">
<code class="descclassname">uos.</code><code class="descname">statvfs</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.statvfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the status of a fileystem.</p>
<p>Returns a tuple with the filesystem information in the following order:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">f_bsize</span></code> &#8211; file system block size</li>
<li><code class="docutils literal"><span class="pre">f_frsize</span></code> &#8211; fragment size</li>
<li><code class="docutils literal"><span class="pre">f_blocks</span></code> &#8211; size of fs in f_frsize units</li>
<li><code class="docutils literal"><span class="pre">f_bfree</span></code> &#8211; number of free blocks</li>
<li><code class="docutils literal"><span class="pre">f_bavail</span></code> &#8211; number of free blocks for unpriviliged users</li>
<li><code class="docutils literal"><span class="pre">f_files</span></code> &#8211; number of inodes</li>
<li><code class="docutils literal"><span class="pre">f_ffree</span></code> &#8211; number of free inodes</li>
<li><code class="docutils literal"><span class="pre">f_favail</span></code> &#8211; number of free inodes for unpriviliged users</li>
<li><code class="docutils literal"><span class="pre">f_flag</span></code> &#8211; mount flags</li>
<li><code class="docutils literal"><span class="pre">f_namemax</span></code> &#8211; maximum filename length</li>
</ul>
</div></blockquote>
<p>Parameters related to inodes: <code class="docutils literal"><span class="pre">f_files</span></code>, <code class="docutils literal"><span class="pre">f_ffree</span></code>, <code class="docutils literal"><span class="pre">f_avail</span></code>
and the <code class="docutils literal"><span class="pre">f_flags</span></code> parameter may return <code class="docutils literal"><span class="pre">0</span></code> as they can be unavailable
in a port-specific implementation.</p>
</dd></dl>

<dl class="function">
<dt id="uos.sync">
<code class="descclassname">uos.</code><code class="descname">sync</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uos.sync" title="Permalink to this definition">¶</a></dt>
<dd><p>Sync all filesystems.</p>
</dd></dl>

</div>
<div class="section" id="terminal-redirection-and-duplication">
<h2>Terminal redirection and duplication<a class="headerlink" href="#terminal-redirection-and-duplication" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="uos.dupterm">
<code class="descclassname">uos.</code><code class="descname">dupterm</code><span class="sig-paren">(</span><em>stream_object</em>, <em>index=0</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.dupterm" title="Permalink to this definition">¶</a></dt>
<dd><p>Duplicate or switch the MicroPython terminal (the REPL) on the given <a class="reference internal" href="../reference/glossary.html#term-stream"><code class="xref any std std-term docutils literal"><span class="pre">stream</span></code></a>-like
object. The <em>stream_object</em> argument must implement the <code class="docutils literal"><span class="pre">readinto()</span></code> and
<code class="docutils literal"><span class="pre">write()</span></code> methods.  The stream should be in non-blocking mode and
<code class="docutils literal"><span class="pre">readinto()</span></code> should return <code class="docutils literal"><span class="pre">None</span></code> if there is no data available for reading.</p>
<p>After calling this function all terminal output is repeated on this stream,
and any input that is available on the stream is passed on to the terminal input.</p>
<p>The <em>index</em> parameter should be a non-negative integer and specifies which
duplication slot is set.  A given port may implement more than one slot (slot 0
will always be available) and in that case terminal input and output is
duplicated on all the slots that are set.</p>
<p>If <code class="docutils literal"><span class="pre">None</span></code> is passed as the <em>stream_object</em> then duplication is cancelled on
the slot given by <em>index</em>.</p>
<p>The function returns the previous stream-like object in the given slot.</p>
</dd></dl>

</div>
<div class="section" id="filesystem-mounting">
<h2>Filesystem mounting<a class="headerlink" href="#filesystem-mounting" title="Permalink to this headline">¶</a></h2>
<p>Some ports provide a Virtual Filesystem (VFS) and the ability to mount multiple
&#8220;real&#8221; filesystems within this VFS.  Filesystem objects can be mounted at either
the root of the VFS, or at a subdirectory that lives in the root.  This allows
dynamic and flexible configuration of the filesystem that is seen by Python
programs.  Ports that have this functionality provide the <a class="reference internal" href="#uos.mount" title="uos.mount"><code class="xref py py-func docutils literal"><span class="pre">mount()</span></code></a> and
<a class="reference internal" href="#uos.umount" title="uos.umount"><code class="xref py py-func docutils literal"><span class="pre">umount()</span></code></a> functions, and possibly various filesystem implementations
represented by VFS classes.</p>
<dl class="function">
<dt id="uos.mount">
<code class="descclassname">uos.</code><code class="descname">mount</code><span class="sig-paren">(</span><em>fsobj</em>, <em>mount_point</em>, <em>*</em>, <em>readonly</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.mount" title="Permalink to this definition">¶</a></dt>
<dd><p>Mount the filesystem object <em>fsobj</em> at the location in the VFS given by the
<em>mount_point</em> string.  <em>fsobj</em> can be a a VFS object that has a <code class="docutils literal"><span class="pre">mount()</span></code>
method, or a block device.  If it&#8217;s a block device then the filesystem type
is automatically detected (an exception is raised if no filesystem was
recognised).  <em>mount_point</em> may be <code class="docutils literal"><span class="pre">'/'</span></code> to mount <em>fsobj</em> at the root,
or <code class="docutils literal"><span class="pre">'/&lt;name&gt;'</span></code> to mount it at a subdirectory under the root.</p>
<p>If <em>readonly</em> is <code class="docutils literal"><span class="pre">True</span></code> then the filesystem is mounted read-only.</p>
<p>During the mount process the method <code class="docutils literal"><span class="pre">mount()</span></code> is called on the filesystem
object.</p>
<p>Will raise <code class="docutils literal"><span class="pre">OSError(EPERM)</span></code> if <em>mount_point</em> is already mounted.</p>
</dd></dl>

<dl class="function">
<dt id="uos.umount">
<code class="descclassname">uos.</code><code class="descname">umount</code><span class="sig-paren">(</span><em>mount_point</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.umount" title="Permalink to this definition">¶</a></dt>
<dd><p>Unmount a filesystem. <em>mount_point</em> can be a string naming the mount location,
or a previously-mounted filesystem object.  During the unmount process the
method <code class="docutils literal"><span class="pre">umount()</span></code> is called on the filesystem object.</p>
<p>Will raise <code class="docutils literal"><span class="pre">OSError(EINVAL)</span></code> if <em>mount_point</em> is not found.</p>
</dd></dl>

<dl class="class">
<dt id="uos.VfsFat">
<em class="property">class </em><code class="descclassname">uos.</code><code class="descname">VfsFat</code><span class="sig-paren">(</span><em>block_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.VfsFat" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a filesystem object that uses the FAT filesystem format.  Storage of
the FAT filesystem is provided by <em>block_dev</em>.
Objects created by this constructor can be mounted using <a class="reference internal" href="#uos.mount" title="uos.mount"><code class="xref py py-func docutils literal"><span class="pre">mount()</span></code></a>.</p>
<dl class="staticmethod">
<dt id="uos.VfsFat.mkfs">
<em class="property">static </em><code class="descname">mkfs</code><span class="sig-paren">(</span><em>block_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.VfsFat.mkfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a FAT filesystem on <em>block_dev</em>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="block-devices">
<h2>Block devices<a class="headerlink" href="#block-devices" title="Permalink to this headline">¶</a></h2>
<p>A block device is an object which implements the block protocol, which is a set
of methods described below by the <a class="reference internal" href="#uos.AbstractBlockDev" title="uos.AbstractBlockDev"><code class="xref py py-class docutils literal"><span class="pre">AbstractBlockDev</span></code></a> class.  A concrete
implementation of this class will usually allow access to the memory-like
functionality a piece of hardware (like flash memory).  A block device can be
used by a particular filesystem driver to store the data for its filesystem.</p>
<dl class="class">
<dt id="uos.AbstractBlockDev">
<em class="property">class </em><code class="descclassname">uos.</code><code class="descname">AbstractBlockDev</code><span class="sig-paren">(</span><em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.AbstractBlockDev" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a block device object.  The parameters to the constructor are
dependent on the specific block device.</p>
<dl class="method">
<dt id="uos.AbstractBlockDev.readblocks">
<code class="descname">readblocks</code><span class="sig-paren">(</span><em>block_num</em>, <em>buf</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.AbstractBlockDev.readblocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Starting at <em>block_num</em>, read blocks from the device into <em>buf</em> (an array
of bytes).  The number of blocks to read is given by the length of <em>buf</em>,
which will be a multiple of the block size.</p>
</dd></dl>

<dl class="method">
<dt id="uos.AbstractBlockDev.writeblocks">
<code class="descname">writeblocks</code><span class="sig-paren">(</span><em>block_num</em>, <em>buf</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.AbstractBlockDev.writeblocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Starting at <em>block_num</em>, write blocks from <em>buf</em> (an array of bytes) to
the device.  The number of blocks to write is given by the length of <em>buf</em>,
which will be a multiple of the block size.</p>
</dd></dl>

<dl class="method">
<dt id="uos.AbstractBlockDev.ioctl">
<code class="descname">ioctl</code><span class="sig-paren">(</span><em>op</em>, <em>arg</em><span class="sig-paren">)</span><a class="headerlink" href="#uos.AbstractBlockDev.ioctl" title="Permalink to this definition">¶</a></dt>
<dd><p>Control the block device and query its parameters.  The operation to
perform is given by <em>op</em> which is one of the following integers:</p>
<blockquote>
<div><ul class="simple">
<li>1 &#8211; initialise the device (<em>arg</em> is unused)</li>
<li>2 &#8211; shutdown the device (<em>arg</em> is unused)</li>
<li>3 &#8211; sync the device (<em>arg</em> is unused)</li>
<li>4 &#8211; get a count of the number of blocks, should return an integer
(<em>arg</em> is unused)</li>
<li>5 &#8211; get the number of bytes in a block, should return an integer,
or <code class="docutils literal"><span class="pre">None</span></code> in which case the default value of 512 is used
(<em>arg</em> is unused)</li>
</ul>
</div></blockquote>
</dd></dl>

</dd></dl>

<p>By way of example, the following class will implement a block device that stores
its data in RAM using a <code class="docutils literal"><span class="pre">bytearray</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">RAMBlockDev</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_size</span><span class="p">,</span> <span class="n">num_blocks</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">block_size</span> <span class="o">=</span> <span class="n">block_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">block_size</span> <span class="o">*</span> <span class="n">num_blocks</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">readblocks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_num</span><span class="p">,</span> <span class="n">buf</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">buf</span><span class="p">)):</span>
            <span class="n">buf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">block_num</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">block_size</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">writeblocks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_num</span><span class="p">,</span> <span class="n">buf</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">buf</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">block_num</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">block_size</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">buf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">ioctl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">op</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span> <span class="c"># get number of blocks</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">block_size</span>
        <span class="k">if</span> <span class="n">op</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span> <span class="c"># get block size</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">block_size</span>
</pre></div>
</div>
<p>It can be used as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">uos</span>

<span class="n">bdev</span> <span class="o">=</span> <span class="n">RAMBlockDev</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">uos</span><span class="o">.</span><span class="n">VfsFat</span><span class="o">.</span><span class="n">mkfs</span><span class="p">(</span><span class="n">bdev</span><span class="p">)</span>
<span class="n">vfs</span> <span class="o">=</span> <span class="n">uos</span><span class="o">.</span><span class="n">VfsFat</span><span class="p">(</span><span class="n">bdev</span><span class="p">)</span>
<span class="n">uos</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="n">vfs</span><span class="p">,</span> <span class="s">&#39;/ramdisk&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ure.html" class="btn btn-neutral float-right" title="ure – simple regular expressions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ujson.html" class="btn btn-neutral" title="ujson – JSON encoding and decoding" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2019, Damien P. George, Paul Sokolovsky, OpenMV LLC, and contributors.
      Last updated on 31 Mar 2019.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Ports and Versions</span>
    openmvcam (latest)
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <!--p>
    <dl>
      <dt>Ports</dt>
      
        <dd><a href="//en/latest/unix">unix</a></dd>
      
        <dd><a href="//en/latest/pyboard">pyboard</a></dd>
      
        <dd><a href="//en/latest/wipy">wipy</a></dd>
      
        <dd><a href="//en/latest/esp8266">esp8266</a></dd>
      
        <dd><a href="//en/latest/openmvcam">openmvcam</a></dd>
      
    </dl>
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="//en/latest/openmvcam">latest</a></dd>
      
    </dl>
    <dl>
      <dt>Downloads</dt>
      
        <dd><a href="//en/latest/micropython-openmvcam.pdf">PDF</a></dd>
      
    </dl>
    </p-->
    <dl>
        <dt>Language</dt>
        
          <dd><a href="http://docs.openmv.io">English</a></dd>
        
          <dd><a href="http://doc.singtown.cc/openmv_zh">中文</a></dd>
        
    </dl>
    <hr/>
    <dl>
      <dt>External links</dt>
        <dd>
          <a href="https://openmv.io">openmv.io</a>
        </dd>
        <dd>
          <a href="http://forums.openmv.io">forums.openmv.io</a>
        </dd>
        <dd>
          <a href="https://github.com/openmv/openmv">github.com/openmv/openmv</a>
        </dd>
        <dd>
          <a href="http://micropython.org">micropython.org</a>
        </dd>
        <dd>
          <a href="http://forum.micropython.org">forum.micropython.org</a>
        </dd>
        <dd>
          <a href="https://github.com/micropython/micropython">github.com/micropython/micropython</a>
        </dd>
    </dl>
  </div>
</div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.9.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>